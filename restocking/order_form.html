{% extends "base.html" %}{% block content %}
<h3>ðŸ›’ New Order â€” {{ supplier.name }}</h3>

<form method="post" action="/suppliers/{{ supplier.id }}/order/preview" class="card" style="max-width:800px">
  <div class="row">
    <label style="flex:1">Outlet Name
      <input name="outlet_name" value="Sari Rasa (East Village)" required>
    </label>
    <label style="flex:1">Notes (optional)
      <input name="notes" placeholder="Deliver before 10am; use back door lift">
    </label>
  </div>

  <div class="grid" style="margin-top:12px">
    {% for it in items %}
      <div class="row card" style="align-items:center">
        <div style="flex:1">
          <strong>{{ it.name }}</strong> ({{ it.unit }})
          {% if it.item_type %}<small>â€¢ {{ it.item_type }}</small>{% endif %}
        </div>
        <div class="row" style="gap:4px">
          <button type="button" onclick="
            const qty=document.getElementById('qty_{{it.id}}');
            qty.value = Math.max(0, parseInt(qty.value||'0')-1);
          ">-</button>
          <input id="qty_{{it.id}}" name="qty_{{it.id}}" type="number" min="0" value="{{ it.default_qty }}" style="width:80px;text-align:center">
          <button type="button" onclick="
            const qty=document.getElementById('qty_{{it.id}}');
            qty.value = (parseInt(qty.value||'0')+1);
          ">+</button>
        </div>
      </div>
    {% else %}
      <div class="card">No items configured yet.</div>
    {% endfor %}
  </div>

  <div class="row" style="justify-content:flex-end; margin-top:12px">
    <a href="/suppliers/{{ supplier.id }}/items">Cancel</a>
    <button type="submit">Preview WhatsApp</button>
  </div>
</form>
{% endblock %}
